<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>WellnessApp</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <div class="gradient"></div>
  <div class="app">
    <!-- LOGIN -->
    <section id="view-login" class="view view--active">
      <div class="auth-card">
        <div class="auth-avatar"><span class="icon">ğŸ‘¤</span></div>
        <h1>Bienvenido de vuelta</h1>
        <p class="auth-subtitle">Inicia sesiÃ³n para continuar con tu bienestar</p>
        <form id="loginForm" class="auth-form">
          <label class="field"><span>Correo electrÃ³nico</span><input type="email" id="loginEmail" placeholder="tÃº@correo.com" required></label>
          <label class="field"><span>ContraseÃ±a</span><input type="password" id="loginPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required></label>
          <button type="submit" class="btn btn--primary">Iniciar sesiÃ³n</button>
          <p id="loginStatus" class="status"></p>
        </form>
        <p class="auth-switch">Â¿No tienes una cuenta? <button type="button" class="link" data-switch="register">RegÃ­strate aquÃ­</button></p>
      </div>
    </section>

    <!-- REGISTRO -->
    <section id="view-register" class="view">
      <div class="auth-card">
        <div class="auth-avatar"><span class="icon">ğŸ†•</span></div>
        <h1>Crear cuenta</h1>
        <p class="auth-subtitle">Ãšnete para comenzar a monitorear tu bienestar</p>
        <form id="registerForm" class="auth-form">
          <label class="field"><span>Nombre completo</span><input type="text" id="registerName" placeholder="Tu nombre"></label>
          <label class="field"><span>Correo electrÃ³nico</span><input type="email" id="registerEmail" placeholder="tÃº@correo.com" required></label>
          <label class="field"><span>Edad</span><input type="number" id="registerAge" placeholder="18" min="15" max="100"></label>
          <label class="field">
            <span>Nivel educativo</span>
            <select id="registerEducation">
              <option value="">Selecciona nivel</option>
              <option>Secundaria</option>
              <option>Bachillerato</option>
              <option>Universidad</option>
              <option>Postgrado</option>
            </select>
          </label>
          <label class="field"><span>ContraseÃ±a</span><input type="password" id="registerPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required></label>
          <label class="field"><span>Confirmar contraseÃ±a</span><input type="password" id="registerConfirm" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required></label>
          <button type="submit" class="btn btn--primary">Crear cuenta</button>
          <p id="registerStatus" class="status"></p>
        </form>
        <p class="auth-switch">Â¿Ya tienes una cuenta? <button type="button" class="link" data-switch="login">Inicia sesiÃ³n aquÃ­</button></p>
      </div>
    </section>

    <!-- DASHBOARD -->
    <section id="view-dashboard" class="view">
      <header class="topbar">
        <div>
          <h2 id="dashboardGreeting">Hola</h2>
          <p class="topbar-date" id="dashboardDate"></p>
        </div>
        <button class="btn btn--ghost" id="btnLogout">Cerrar sesiÃ³n</button>
      </header>

      <section class="hero-card">
        <div>
          <p class="hero-subtitle">Tu bienestar es importante</p>
          <h3>Check-in de Bienestar</h3>
          <p class="hero-description">Toma 2 minutos para cuidar tu salud mental y emocional.</p>
          <button class="btn btn--primary" id="btnStartGad7">Empezar ahora</button>
          <span class="hero-points">+10 puntos al completar</span>
        </div>
        <div class="hero-illustration" aria-hidden="true">ğŸ’«</div>
      </section>

      <section class="quick-links">
        <article class="quick-card"><div class="quick-icon">â˜ï¸</div><div><h4>Comunidad</h4><p>Conecta con otros estudiantes y comparte estrategias.</p></div></article>
        <article class="quick-card quick-card--action">
          <div class="quick-icon">ğŸ©º</div>
          <div><h4>Evaluaciones clÃ­nicas</h4><p>Explora las evaluaciones PHQ-9 y GAD-7 para monitorear tu progreso.</p></div>
          <button class="btn btn--light" id="btnStartPhq9">Iniciar PHQ-9</button>
        </article>
        <article class="quick-card"><div class="quick-icon">ğŸ§°</div><div><h4>Recursos</h4><p>Tips y herramientas Ãºtiles seleccionadas por especialistas.</p></div></article>
        <article class="quick-card quick-card--action">
          <div class="quick-icon">ğŸ“š</div>
          <div>
            <h4>Historial de evaluaciones</h4>
            <p>Consulta tus resultados previos y notas personales.</p>
          </div>
          <button class="btn btn--light" id="btnOpenHistory" type="button" aria-controls="historyPanel" aria-expanded="false">Ver historial</button>
        </article>
      </section>

      <section id="statsSection" class="insights">
        <div class="insights-header">
          <h3>EstadÃ­sticas de tus evaluaciones</h3>
          <p>Consulta tu progreso y las tendencias recientes de tus resultados.</p>
        </div>
        <div id="statsEmpty" class="stats-empty">AÃºn no hay suficientes evaluaciones para mostrar estadÃ­sticas.</div>
        <div class="insights-grid">
          <article class="stats-card">
            <h4>Total de evaluaciones</h4>
            <p id="statsTotalEvaluations" class="stats-value">0</p>
            <span class="stats-label">Se cuentan todas las evaluaciones guardadas.</span>
          </article>
          <article class="stats-card">
            <h4>Promedio GAD-7</h4>
            <p id="statsAverageGad7" class="stats-value">â€“</p>
            <span class="stats-label">Suma de puntajes Ã· nÃºmero de pruebas GAD-7.</span>
          </article>
          <article class="stats-card">
            <h4>Promedio PHQ-9</h4>
            <p id="statsAveragePhq9" class="stats-value">â€“</p>
            <span class="stats-label">Suma de puntajes Ã· nÃºmero de pruebas PHQ-9.</span>
          </article>
        </div>
        <div class="latest-grid">
          <article class="latest-card">
            <h4>Ãšltimo resultado GAD-7</h4>
            <p id="statsLastGad7" class="latest-value">AÃºn no has completado un GAD-7.</p>
          </article>
          <article class="latest-card">
            <h4>Ãšltimo resultado PHQ-9</h4>
            <p id="statsLastPhq9" class="latest-value">AÃºn no has completado un PHQ-9.</p>
          </article>
        </div>
        <div class="charts-grid">
          <article class="chart-card">
            <header>
              <h4>EvoluciÃ³n de puntajes</h4>
              <span>Ãšltimas evaluaciones</span>
            </header>
            <canvas id="statsTrend" aria-label="GrÃ¡fico de lÃ­nea con la evoluciÃ³n de puntajes" role="img"></canvas>
            <p class="chart-empty" data-chart-empty="trend">Completa algunas evaluaciones para ver la evoluciÃ³n de tus resultados.</p>
          </article>
          <article class="chart-card">
            <header>
              <h4>DistribuciÃ³n por categorÃ­a</h4>
              <span>Conteo de evaluaciones por nivel</span>
            </header>
            <canvas id="statsSeverity" aria-label="GrÃ¡fico de barras con la distribuciÃ³n por categorÃ­a" role="img"></canvas>
            <p class="chart-empty" data-chart-empty="severity">Cuando tengas evaluaciones guardadas verÃ¡s aquÃ­ la distribuciÃ³n por niveles.</p>
          </article>
        </div>
      </section>

      <section id="historyPanel" class="history hidden" aria-hidden="true" tabindex="-1">
        <div class="history-header">
          <h3>Tu historial reciente</h3>
          <button class="link" id="btnCloseHistory" type="button">Ocultar</button>
        </div>
        <ul id="historyList" class="history-list"></ul>
      </section>
    </section>

    <!-- ASSESSMENT -->
    <section id="view-assessment" class="view">
      <header class="assessment-header">
        <button class="back" id="btnBackToDashboard" aria-label="Volver">â†</button>
        <div><p class="assessment-title" id="assessmentTitle">Check-in de Bienestar</p><p class="assessment-step" id="assessmentStep"></p></div>
        <div class="progress"><div class="progress-bar" id="assessmentProgress"></div></div>
      </header>
      <section class="question-card" id="questionCard"></section>
      <footer class="assessment-footer">
        <button class="btn btn--ghost" id="btnPrevQuestion">Anterior</button>
        <div class="assessment-points">+10 puntos al completar Â· +5 extra si terminas en menos de 2 min</div>
        <button class="btn btn--primary" id="btnNextQuestion">Siguiente</button>
      </footer>
    </section>

    <!-- RESULTADOS -->
    <section id="view-result" class="view">
      <div class="result-card">
        <div class="result-icon">âœ¨</div>
        <h2 id="resultTitle">Â¡Bien hecho!</h2>
        <p id="resultSummary" class="result-summary"></p>
        <ul id="resultDetails" class="result-details"></ul>
        <div class="result-actions">
          <button class="btn btn--primary" id="btnResultDashboard">Volver al inicio</button>
          <button class="btn btn--light" id="btnResultHistory">Ver historial</button>
        </div>
      </div>
    </section>
  </div>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <!-- ğŸ”¹ BOTÃ“N DE AYUDA ğŸ”¹ -->
  <div class="help-widget" aria-hidden="false">
    <button id="help-toggle" class="help-btn" aria-label="Abrir ayuda" aria-haspopup="true" aria-expanded="false">â“</button>
    <nav id="help-panel" class="help-panel" aria-label="MenÃº de ayuda" hidden>
      <header class="help-panel-header">
        <strong>Recursos y ayuda</strong>
        <button id="help-close" class="help-close" aria-label="Cerrar">âœ–</button>
      </header>
      <ul class="help-list">
        <li><button class="help-item" data-action="crisis">ğŸ“ LÃ­nea de crisis â€” <strong>2331-7101</strong></button></li>
        <li><button class="help-item" data-action="primeros">ğŸªœ Primeros pasos</button></li>
        <li><button class="help-item" data-action="finanzas">ğŸ’° Tips financieros</button></li>
        <li><button class="help-item" data-action="rapidos">âš¡ Tips rÃ¡pidos</button></li>
      </ul>
    </nav>
  </div>

  <!-- Modal de crisis -->
  <div id="modal-crisis" class="help-modal" hidden>
    <div class="help-modal-content">
      <h3>ğŸ“ LÃ­nea de crisis universitaria</h3>
      <p>Si necesitas hablar con alguien, puedes comunicarte con:</p>
      <p><strong>2331-7101</strong></p>
      <div class="help-modal-actions">
        <a href="tel:23317101" class="btn btn--primary">Llamar ahora</a>
        <button id="modal-crisis-close" class="btn btn--light">Cerrar</button>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js" crossorigin="anonymous"></script>
  <script src="js/app.js?v=2"></script>
</body>
</html>
